{{define "dashboard.html"}}
{{template "base" .}}
{{end}}

{{define "title"}}Baseball API - Dashboard{{end}}

{{define "head_extra"}}
<script src="https://unpkg.com/htmx.org@1.9.10"></script>
{{end}}

{{define "body_attrs"}}data-page="dashboard" data-authenticated="{{if .User}}true{{else}}false{{end}}"{{end}}

{{define "content"}}
  {{if .User}}
  <div class="stack">
    <section class="panel">
      <h2>API Keys</h2>
      <p>Generate and revoke API keys for programmatic access.</p>
      <form id="create-key-form" class="stack" style="gap: 1rem">
        <div class="field">
          <label for="key-name">Key Name (optional)</label>
          <input type="text" id="key-name" name="name" placeholder="Production Server" />
        </div>
        <button type="submit" class="btn btn-primary" style="width: fit-content">Generate Key</button>
      </form>
      <div id="new-key-result" class="stack" style="gap: 1rem"></div>
    </section>

    <section class="panel">
      <h2>Existing Keys</h2>
      <p class="muted">Stored securely â€” revoke keys you no longer need.</p>
      <div id="api-keys-list" class="table-container">
        <p class="muted" style="padding: 1rem">Loading keys...</p>
      </div>
    </section>
  </div>
  {{else}}
  <div class="panel">
    <h2>Authentication Required</h2>
    <p class="muted">
      You must be logged in to access the dashboard. <a href="/login">Login here</a>.
    </p>
  </div>
  {{end}}
{{end}}

{{define "body_scripts"}}
<script defer src="/static/js/dashboard.js"></script>
{{end}}
